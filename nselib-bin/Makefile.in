prefix = @prefix@
exec_prefix = @exec_prefix@
bindir = @bindir@
sbindir = @sbindir@
mandir = @mandir@
libexecdir = @libexecdir@
nselib_bindir = $(libexecdir)/nmap/nselib-bin

CC = @CC@
CPPFLAGS = @CPPFLAGS@
CFLAGS = @CFLAGS@
LDFLAGS = @LDFLAGS@
LIBS = @LIBS@

LIBTOOL= ./libtool
LTFLAGS = --tag=CC --silent

all:

%.so: %.c @LIBTOOL_DEPS@
	$(LIBTOOL) $(LTFLAGS) --mode=compile $(CC) $(CPPFLAGS) $(CFLAGS) -c $*.c
	$(LIBTOOL) $(LTFLAGS) --mode=link $(CC) -avoid-version -module -rpath $(nselib_bindir) $(LDFLAGS) -o $*.la $*.lo $(LIBS)
	mv .libs/$*.so $*.so

clean: 
	rm -f *.so *.la *.lo
	rm -rf .libs

distclean: clean
	rm -f Makefile config.log config.status libtool 
