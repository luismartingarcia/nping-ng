PLATFORM=@host@

CC = @CC@
CXX = @CXX@
CCOPT = 
DBGFLAGS = 


SHTOOL = ../shtool
INSTALL = $(SHTOOL) install 
 
LIBTOOL= ./libtool
LTFLAGS = --tag=CC --silent

all: bit.so pcre.so

bit.so: bit.c @LIBTOOL_DEPS@
	$(LIBTOOL) $(LTFLAGS) --mode=compile $(CC) @LUAINCLUDE@ $(CFLAGS) -c bit.c
	$(LIBTOOL) $(LTFLAGS) --mode=link $(CC) -avoid-version -module -rpath /usr/local/lib -o bit.la bit.lo
	mv .libs/bit.so bit.so

pcre.so: pcre.c @LIBTOOL_DEPS@
	$(LIBTOOL) $(LTFLAGS) --mode=compile $(CC) @NBASE_INCLUDE@ @PCRE_INCLUDE@ @LUAINCLUDE@ $(CFLAGS) -c pcre.c
	$(LIBTOOL) $(LTFLAGS) --mode=link $(CC) @NBASE_LD@ @PCRE_LD@ @NBASE_LIBS@ @PCRE_LIBS@ -avoid-version -module -rpath /usr/local/lib -o pcre.la pcre.lo
	mv .libs/pcre.so pcre.so


clean: 
	rm -f bit.so pcre.so *.la *.lo
	rm -rf .libs

distclean: clean
	rm -f Makefile config.log config.status libtool 
